<div class="container-fluid">
	<div class="row filter-bar">
		<div class="col-xs-1">
			<div class="btn btn-primary" ng-click="toggleSortAlpha()">{{sortDisplayString}}</div>
		</div>
		<div class="col-xs-2">
			<select class="form-control" ng-model="filters.currentClass" ng-change="setDisplayedStudents()"
			ng-options="class.name for class in classes">
				<option value="">Select Class</option>
			</select>
		</div>
		<div class="col-xs-2">
			<select class="form-control" ng-model="filters.currentBelt" ng-options="belt as belt for belt in belts">
				<option value="">Select Belt</option>
			</select>
		</div>
		<div class="col-xs-2 checkboxes">
			<span class="checkbox-inline">
				<label><input type="checkbox" name="activeBox" id="activeBox" ng-model="filters.showActive" ng-click="setDisplayedStudents()">Active</label>
			</span>
			<span class="checkbox-inline">
				<label><input type="checkbox" name="inactiveBox" ng-model="filters.showInactive" ng-click="setDisplayedStudents()">Inactive</label>
			</span>
		</div>
		<div class="col-xs-1">
			<div class="btn btn-primary" ng-click="today()">Today</div>
		</div>
		<div class="col-xs-2">
			<input type="search" class="form-control" placeholder="Search" name="searchbox" ng-model="filters.searchQuery">
		</div>
		<div class="col-xs-2">
	       	<div class="input-group">
	          	<input type="text" class="form-control" 
		                 uib-datepicker-popup="MM-dd-yyyy"
		                 ng-model="selectedDate.value"
		                 is-open="selectedDate.open"
		                 ng-required="true"
		                 close-text="Close"
		                 placeholder="Date" />
          		<span class="input-group-btn">
	          		<button class="btn btn-default" ng-click="open()">
	          		<i class="glyphicon glyphicon-calendar"></i></button> 
	          	</span>
	        </div>
		</div>
	</div>

	<div class="row">
		<div class="display-4">
		Showing {{people.length}} student<span ng-if="people.length !== 1">s</span>
		</div>
	</div>

	<div class="row">
		<div class="col-xs-10 col-xs-offset-1" ng-repeat="p in people | filter: (filters.currentBelt || undefined) && { person: { belt: filters.currentBelt } }| filter: filters.searchQuery | orderBy: 'person.first_name':!sortAZ">
			<div class="col-xs-2 text-center entry-picture">
				<a ui-sref="studentDetails({studentId: p.id})">
					<img ng-src="{{p.person.picture}}">
				</a>
			</div>
			<div class="col-xs-8 entry">
				<div class="row">
					<a ui-sref="studentDetails({studentId: p.id})">
						<h2>{{p.person.first_name}} {{p.person.last_name}}</h2>
					</a>
				</div>
				<div class="row spacer-20">
					<span ng-repeat="email in p.person.emails | limitTo:1 track by $index">
						<span>Email: {{email.email}} <br></span>
					</span>
					<span>Phone: {{p.person.primary_phone}}</span>
				</div>
				<div class="row" ng-repeat="contact in p.person.emergency_contacts | limitTo:2 track by $index">
					Emergency Contact {{$index + 1}}: {{contact.full_name}}, {{contact.phone_number}}
				</div>
				<hr>
			</div>
		</div>
	</div>
</div>